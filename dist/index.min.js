!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("Drawer",[],e):"object"==typeof exports?exports.Drawer=e():t.Drawer=e()}(this,function(){return function(t){function e(n){if(r[n])return r[n].exports;var i=r[n]={exports:{},id:n,loaded:!1};return t[n].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var r={};return e.m=t,e.c=r,e.p="",e(0)}([function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){var r={width:0,height:0,display:"none"},n=t.css("position");["absolute","fixed"].indexOf(n)>-1&&(r.position=n);var i=e.getStyle(["padding","border","width","height"]);return i.margin=v.default.inverse(i.padding),{wrapper:r,inner:i}}function o(t){var e=!1;0===t.width()&&"block"===t.css("display")&&"none"===t.css("float")&&(t.css("float","left"),e=!0),"border-box"===t.css("box-sizing")?t.css(t.outerSize(w)):t.css(t.size(w)),e&&t.removeStyle("float"),"static"!==t.css("position")&&t.css("position","static")}function s(t){switch(t){case"top":return function(e){var r=u(e,t),n=r.wrapper,i=r.inner;return v.default.extend(n,{width:e.outerWidth(w),height:0}),v.default.extend(i,{bottom:0,left:0},v.default.prefix("transform","translateY(100%)")),{wrapper:n,inner:i}};case"bottom":return function(e){var r=u(e,t),n=r.wrapper,i=r.inner;return v.default.extend(n,{width:e.outerWidth(w),height:0}),v.default.extend(i,{top:0,left:0},v.default.prefix("transform","translateY(-100%)")),{wrapper:n,inner:i}};case"left":return function(e){var r=u(e,t),n=r.wrapper,i=r.inner;return v.default.extend(n,{width:0,height:e.outerHeight(w)}),v.default.extend(i,{top:0,right:0},v.default.prefix("transform","translateX(100%)")),{wrapper:n,inner:i}};case"right":return function(e){var r=u(e,t),n=r.wrapper,i=r.inner;return v.default.extend(n,{width:0,height:e.outerHeight(w)}),v.default.extend(i,{top:0,left:0},v.default.prefix("transform","translateX(-100%)")),{wrapper:n,inner:i}}}}function u(t,e){var r=t.getStyle(["display","top","bottom","right","left"]);["absolute","fixed"].indexOf(t.css("position"))>-1&&(r[e]="auto");var n=v.default.extend({margin:0,padding:0,border:"none"},t.outerSize(w));return{wrapper:r,inner:n}}function d(t,e){switch(t){case"top":case"bottom":return function(t){return{wrapper:v.default.extend({height:t.outerHeight(w)},e),inner:v.default.extend(v.default.prefix("transform","translateY(0)"),e)}};case"left":case"right":return function(t){return{wrapper:v.default.extend({width:t.outerWidth(w)},e),inner:v.default.extend(v.default.prefix("transform","translateX(0)"),e)}}}}function l(t){var e="border-box"===t.css("box-sizing")?t.outerSize(w):t.size(w);"static"!==t.css("position")&&(e.position="static"),t.css(e)}function f(t){var e=void 0;switch(t){case"top":e=v.default.extend({bottom:0,left:0},v.default.prefix("transform","translateY(0)"));break;case"bottom":e=v.default.extend({top:0,left:0},v.default.prefix("transform","translateY(0)"));break;case"left":e=v.default.extend({top:0,right:0},v.default.prefix("transform","translateX(0)"));break;case"right":e=v.default.extend({top:0,left:0},v.default.prefix("transform","translatex(0)"))}return function(r){var n=r.outerSize(w),i=v.default.extend(r.getStyle(["display","top","right","bottom","left"]),n),a=r.css("position");return"static"!==a&&(i.position=a),["absolute","fixed"].indexOf(a)>-1&&(i[t]="auto"),{wrapper:i,inner:v.default.extend({},n,e)}}}function c(t,e){var r=void 0,n=void 0;switch(t){case"top":r={height:0},n=v.default.prefix("transform","translateY(100%)");break;case"bottom":r={height:0},n=v.default.prefix("transform","translateY(-100%)");break;case"left":r={width:0},n=v.default.prefix("transform","translateX(100%)");break;case"right":r={width:0},n=v.default.prefix("transform","translateX(-100%)")}return v.default.extend(r,e),v.default.extend(n,e),{wrapper:r,inner:n}}function p(t){var e=t.wrapper,r=t.inner,n={margin:0,padding:0,border:"none",background:"transparent"},i=v.default.extend({position:"relative",overflow:"hidden"},v.default.prefix("translateZ",0),n,e),a=v.default.extend({position:"absolute"},n,r);return(0,v.default)('\n        <div class="w-drawer-wrapper" style="'+v.default.stringify(i)+'">\n            <div class="w-drawer-inner" style="'+v.default.stringify(a)+'">\n            </div>\n        </div>\n    ')}function h(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"show",n="show"===r?[e.add,e.remove]:[e.remove,e.add],i=y(n,2),a=i[0],o=i[1];if(a){if(a.class){var s=a.class;Array.isArray(s)&&(s=s.join(" ")),t.addClass(s)}a.style&&t.css(a.style)}if(o){if(o.class){var u=o.class;Array.isArray(u)&&(u=u.join(" ")),t.removeClass(u)}o.style&&t.removeStyle(o.style)}}Object.defineProperty(e,"__esModule",{value:!0});var y=function(){function t(t,e){var r=[],n=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(n=(o=s.next()).done)&&(r.push(o.value),!e||r.length!==e);n=!0);}catch(t){i=!0,a=t}finally{try{!n&&s.return&&s.return()}finally{if(i)throw a}}return r}return function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),g=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),m=r(1),v=n(m),w=!0,x=function(){function t(e){var r=e.target,n=e.direction,a=void 0===n?"bottom":n,o=e.duration,u=void 0===o?250:o,l=e.timingFunction,p=void 0===l?"ease":l,h=e.showOption,y=e.onChange,g=void 0===y?function(){}:y;i(this,t),v.default.extend(this,{direction:a,duration:u,timingFunction:p,showOption:h,onChange:g});var m=v.default.prefix("transition",u+"ms "+p);this.$target=(0,v.default)(r),this.$parent=this.$target.parent(),this.getShowStartStyle=s(a),this.getShowEndStyle=d(a,m),this.getHideStartStyle=f(a),this.hideEndStyle=c(a,m),this.status="ready"}return g(t,[{key:"show",value:function(){var t=this;if("ready"===this.status&&"none"===this.$target.css("display")){this.status="pending";var e=this.$target,r=e.attr("style")||"",n=p(a(e,this.$parent)),i=(0,v.default)(".w-drawer-inner",n);n.insertAfter(e),i.append(e),h(e,this.showOption,"show"),n.removeStyle("display"),o(e);var s=this.getShowStartStyle(e),u=s.wrapper,d=s.inner;n.css(u),i.css(d),i.on("webkitTransitionEnd transitionend",function(){n.replaceWith(e),e.attr("style",r),n=null,i=null,t.status="ready",t.onChange("show")});var l=this.getShowEndStyle(e),f=l.wrapper,c=l.inner;n.css(f),i.css(c)}}},{key:"hide",value:function(){var t=this;if("ready"===this.status&&"none"!==this.$target.css("display")){this.status="pending";var e=this.$target,r=e.attr("style")||"",n=p(this.getHideStartStyle(e)),i=(0,v.default)(".w-drawer-inner",n);l(e),n.insertAfter(e),i.append(e),n.height(),i.on("webkitTransitionEnd transitionend",function(){h(e,t.showOption,"hide"),n.replaceWith(e),e.attr("style",r),n=null,i=null,t.status="ready",t.onChange("hide")});var a=this.hideEndStyle,o=a.wrapper,s=a.inner;n.css(o),i.css(s)}}},{key:"toggle",value:function(){"none"===this.$target.css("display")?this.show():this.hide()}}]),t}();e.default=x,t.exports=e.default},function(t,e,r){!function(e,r){t.exports=r()}(this,function(){return function(t){function e(n){if(r[n])return r[n].exports;var i=r[n]={exports:{},id:n,loaded:!1};return t[n].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var r={};return e.m=t,e.c=r,e.p="",e(0)}([function(t,e){"use strict";function r(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){return t instanceof s?t:new s(t,e)}function a(t,e,r){return t[e]=r,t}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),s=function(){function t(e,r){if(n(this,t),"string"==typeof e)if(e=e.trim(),"<"===e.slice(0,1)&&">"===e.slice(-1)){var a=document.createElement("div");a.innerHTML=e,e=a.children[0]}else e=(i.getDom(r)||document).querySelector(e);this.dom=e,this.computed=getComputedStyle(e),this.style=e.style}return o(t,[{key:"parent",value:function(){return i(this.dom.parentNode)}},{key:"attr",value:function(t,e){return null==e?this.dom.getAttribute(t):(this.dom.setAttribute(t,e),this)}},{key:"width",value:function(t){return t=t?"px":0,this.computed.boxSizing?parseFloat(this.computed.width)-parseFloat(this.computed.paddingLeft)-parseFloat(this.computed.paddingRight)+t:parseFloat(this.computed.width)+t}},{key:"height",value:function(t){return t=t?"px":0,this.computed.boxSizing?parseFloat(this.computed.height)-parseFloat(this.computed.paddingTop)-parseFloat(this.computed.paddingBottom)+t:parseFloat(this.computed.height)+t}},{key:"size",value:function(t){return{width:this.width(t),height:this.height(t)}}},{key:"outerWidth",value:function(t){return t=t?"px":0,this.dom.clientWidth+parseFloat(this.computed.borderLeft)+parseFloat(this.computed.borderRight)+t}},{key:"outerHeight",value:function(t){return t=t?"px":0,this.dom.clientHeight+parseFloat(this.computed.borderTop)+parseFloat(this.computed.borderBottom)+t}},{key:"outerSize",value:function(t){return{width:this.outerWidth(t),height:this.outerHeight(t)}}},{key:"css",value:function(t,e){switch(i.instance(t)){case"String":return null==e?this.computed[t]:(this.style[t]=e,this);case"Array":return"remove"===e?this.removeStyle(t):this.getStyle(t);default:return this.setStyle(t)}}},{key:"setStyle",value:function(t){var e=Object.keys(t).reduce(function(e,r){return a(e,r,t[r])},i.parse(this.attr("style")||""));return this.attr("style",i.stringify(e)),this}},{key:"getStyle",value:function(t){var e=this;return t.reduce(function(t,r){return a(t,r,e.computed[r])},{})}},{key:"removeStyle",value:function(t){t="string"==typeof t?[t]:t;var e=i.parse(this.attr("style")||""),r=Object.keys(e).filter(function(e){return t.indexOf(e)===-1}).reduce(function(t,r){return""+t+r+":"+e[r]+";"},"");return this.attr("style",r),this}},{key:"addClass",value:function(t){return this.dom.className=t.trim().split(" ").reduce(function(t,e){return t.indexOf(e)>-1?t:t+" "+e},this.dom.className.trim()),this}},{key:"removeClass",value:function(t){var e=" "+this.dom.className+" ";return/^ *$/.test(e)?this:(this.dom.className=t.split(" ").reduce(function(t,e){return t.replace(" "+e+" "," ")},e).trim(),this)}},{key:"insertAfter",value:function(t){t=i.getDom(t);var e=t.parentNode;return e.lastChild===t?e.appendChild(this.dom):e.insertBefore(this.dom,t.nextSibling),this}},{key:"append",value:function(t){return t=i.getDom(t),this.dom.appendChild(t),this}},{key:"replaceWith",value:function(t){t=i.getDom(t);var e=this.dom.parentNode;return e.replaceChild(t,this.dom),this}},{key:"on",value:function(t,e){var r=this;return(Array.isArray(t)?t:t.split(" ")).forEach(function(t){return r.dom.addEventListener(t,e)}),this}}]),t}();i.stringify=function(t){return Object.keys(t).filter(function(e){return!e||null!=t[e]}).reduce(function(e,r){return""+e+i.dasherize(r)+":"+t[r]+";"},"")},i.parse=function(t){return t.trim().replace(/ *(;|:) */g,"$1").replace(/;$/,"").split(";").filter(function(t){return!!t}).reduce(function(t,e){return a.apply(void 0,[t].concat(r(e.split(":"))))},{})},i.dasherize=function(t){return t.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()},i.prefix=function(t,e){return["","-webkit-"].reduce(function(r,n){return a(r,""+n+t,e)},{})},i.inverse=function(t){return(" "+t).replace(/( +)(\D?)(\d+)/g,function(t,e,r,n){return""+e+("-"===r?"+":"-")+n}).replace(/^ /,"")},i.extend=function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];return null==e[0]?e[0]:e.reduce(function(t,e){return null==e?t:Object.keys(e).reduce(function(t,r){return a(t,r,e[r])},t)})},i.instance=function(t){return Object.prototype.toString.call(t).slice(8,-1)},i.getDom=function(t){return t instanceof s?t.dom:t},e.default=i,t.exports=e.default}])})}])});